# NEAM Platform Payment Adapter Configuration
# This file contains all configuration for the Payment Adapter service
# Modify values according to your environment

# =============================================================================
# Service Configuration
# =============================================================================
service:
  name: "payment-adapter"
  host: "0.0.0.0"
  port: 8084
  environment: "production"
  shutdown_timeout: "30s"

# =============================================================================
# Kafka Configuration
# =============================================================================
kafka:
  brokers: "kafka:29092"
  consumer_group: "payment-adapter-group"
  input_topic: "payments.raw"
  output_topic: "payments.normalized"
  dlq_topic: "payments.dlq"
  retry_topic: "payments.retry"
  version: "2.8.0"
  max_open_requests: 100
  dial_timeout: "10s"
  read_timeout: "30s"
  write_timeout: "30s"
  session_timeout: "10s"
  heartbeat_interval: "3s"

# =============================================================================
# Redis Configuration (for idempotency management)
# =============================================================================
redis:
  addr: "redis:6379"
  password: ""
  db: 0
  pool_size: 100
  min_idle_conns: 10
  dial_timeout: "5s"
  read_timeout: "3s"
  write_timeout: "3s"
  idempotency_ttl: "24h"

# =============================================================================
# Message Processing Configuration
# =============================================================================
processing:
  mode: "realtime"  # Options: realtime, batch, hybrid
  worker_count: 10
  batch_size: 100
  batch_timeout: "5s"
  batch_directory: "/data/batch/payments"
  parallel_files: 5

# =============================================================================
# Retry Policy Configuration
# =============================================================================
retry:
  max_retries: 5
  initial_delay: "100ms"
  max_delay: "10s"
  multiplier: 2.0
  jitter: true
  jitter_factor: 0.1
  dlq_max_retries: 3

# =============================================================================
# Logging Configuration
# =============================================================================
logging:
  level: "info"  # Options: debug, info, warn, error
  format: "json"  # Options: json, console
  output_path: "/var/log/neam"
  json_format: true

# =============================================================================
# Monitoring Configuration
# =============================================================================
monitoring:
  enabled: true
  port: 9090
  path: "/metrics"
  health_path: "/health"

# =============================================================================
# Batch Processing Configuration
# =============================================================================
batch:
  supported_formats:
    - "xml"
    - "txt"
    - "json"
  max_file_size: 104857600  # 100MB in bytes
  scan_interval: "1m"
  archive_processed: true
  archive_path: "/data/batch/archive"

# =============================================================================
# Environment-Specific Overrides
# =============================================================================
# These values can be overridden via environment variables:
# - SERVICE_HOST
# - SERVICE_PORT
# - KAFKA_BROKERS
# - REDIS_ADDR
# - REDIS_PASSWORD
# - PROCESSING_MODE
