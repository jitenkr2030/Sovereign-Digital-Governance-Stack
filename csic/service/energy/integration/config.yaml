# Energy Integration Service Configuration
# CSIC Platform - Mining Energy Analytics and Load Forecasting

app:
  name: "energy-integration-service"
  environment: "development"
  version: "1.0.0"
  debug: true

server:
  host: "0.0.0.0"
  port: 8000
  reload: true

database:
  host: "localhost"
  port: 5432
  username: "csic_energy"
  password: "change_me_in_production"
  name: "csic_energy"
  pool_size: 20
  max_overflow: 10
  echo: false
  timescaledb:
    enabled: true

redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 0
  key_prefix: "csic:energy:"

kafka:
  brokers:
    - "localhost:9092"
  consumer_group: "energy-consumer"
  topics:
    telemetry: "mining.telemetry"
    forecast: "energy.forecast"

energy:
  # Power source classifications
  power_sources:
    - id: "hydro"
      name: "Hydropower"
      carbon_factor_grams_per_kwh: 24
      renewable: true
    - id: "solar"
      name: "Solar"
      carbon_factor_grams_per_kwh: 41
      renewable: true
    - id: "wind"
      name: "Wind"
      carbon_factor_grams_per_kwh: 11
      renewable: true
    - id: "nuclear"
      name: "Nuclear"
      carbon_factor_grams_per_kwh: 12
      renewable: true
    - id: "geothermal"
      name: "Geothermal"
      carbon_factor_grams_per_kwh: 38
      renewable: true
    - id: "natural_gas"
      name: "Natural Gas"
      carbon_factor_grams_per_kwh: 450
      renewable: false
    - id: "coal"
      name: "Coal"
      carbon_factor_grams_per_kwh: 820
      renewable: false
    - id: "oil"
      name: "Oil"
      carbon_factor_grams_per_kwh: 650
      renewable: false
    - id: "mixed"
      name: "Mixed Sources"
      carbon_factor_grams_per_kwh: 350
      renewable: null

  # Grid impact thresholds
  grid_impact:
    high_threshold_percent: 10
    medium_threshold_percent: 5
    peak_hour_detection: true

forecasting:
  # Forecast configuration
  default_horizon_days: 30
  max_horizon_days: 365
  retrain_interval_hours: 168  # Weekly
  min_training_data_days: 30
  confidence_level: 0.95

  # Prophet model parameters
  prophet:
    yearly_seasonality: true
    weekly_seasonality: true
    daily_seasonality: false
    seasonality_mode: "multiplicative"
    changepoint_prior_scale: 0.05

  # Anomaly detection
  anomaly_detection:
    enabled: true
    z_threshold: 3.0
    window_size_hours: 24

sustainability:
  # Scoring weights
  weights:
    renewable_percentage: 0.4
    carbon_intensity: 0.3
    efficiency: 0.2
    grid_strain: 0.1

  # Score thresholds
  thresholds:
    excellent: 80
    good: 60
    moderate: 40
    poor: 20

carbon:
  # CO2 calculation settings
  include_transmission_loss: true
  transmission_loss_factor: 0.07  # 7% average loss

alerting:
  enabled: true
  thresholds:
    consumption_spike_percent: 50
    carbon_increase_percent: 25
    efficiency_drop_percent: 20

logging:
  level: "INFO"
  format: "json"
  include_caller: true

metrics:
  enabled: true
  endpoint: "/metrics"
  port: 9090
  prefix: "csic_energy"
