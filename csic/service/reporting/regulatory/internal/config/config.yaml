# Regulatory Reporting Service Configuration
# CSIC Platform - PDF/CSV exports, automated scheduling, WORM storage

app:
  name: "regulatory-reporting-service"
  environment: "development"
  version: "1.0.0"

server:
  host: "0.0.0.0"
  port: 3001
  read_timeout: 60
  write_timeout: 300
  idle_timeout: 120

database:
  host: "localhost"
  port: 5432
  username: "csic_reporting"
  password: "change_me_in_production"
  name: "csic_reporting"
  ssl_mode: "disable"
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: 300

redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 0
  pool_size: 10
  key_prefix: "csic:reporting:"

queue:
  name: "report-generation"
  concurrency: 4
  retry_attempts: 3
  retry_delay: 5000

kafka:
  brokers:
    - "localhost:9092"
  client_id: "reporting-service"
  group_id: "reporting-consumer"
  topics:
    report_generated: "report.generated"
    report_failed: "report.failed"

storage:
  provider: "s3"
  s3:
    endpoint: "http://localhost:9000"
    access_key: "minioadmin"
    secret_key: "minioadmin"
    bucket: "csic-reports"
    region: "us-east-1"
    signed_url_expiry: 3600
  # WORM (Write Once Read Many) configuration
  worm:
    enabled: true
    retention_days: 2555  # 7 years for regulatory compliance
    retention_mode: "COMPLIANCE"
    legal_hold_enabled: true

reporting:
  # Report types configuration
  types:
    - id: "license_status"
      name: "License Status Report"
      description: "Comprehensive license status for all entities"
      template: "license-status.hbs"
      format: "pdf"
      schedule_cron: "0 0 1 * *"  # Monthly on the 1st
    - id: "compliance_summary"
      name: "Compliance Summary Report"
      description: "Overall compliance status summary"
      template: "compliance-summary.hbs"
      format: "pdf"
      schedule_cron: "0 0 * * 0"  # Weekly on Sunday
    - id: "transaction_activity"
      name: "Transaction Activity Report"
      description: "Transaction monitoring activity summary"
      template: "transaction-activity.hbs"
      format: "csv"
      schedule_cron: "0 0 * * *"  # Daily at midnight
    - id: "energy_consumption"
      name: "Energy Consumption Report"
      description: "Energy usage and carbon footprint report"
      template: "energy-consumption.hbs"
      format: "pdf"
      schedule_cron: "0 0 1 * *"  # Monthly on the 1st
    - id: "enforcement_actions"
      name: "Enforcement Actions Report"
      description: "Summary of enforcement actions taken"
      template: "enforcement-actions.hbs"
      format: "pdf"
      schedule_cron: "0 0 1 * *"  # Monthly on the 1st
    - id: "audit_trail"
      name: "Audit Trail Report"
      description: "Complete audit trail of system activities"
      template: "audit-trail.hbs"
      format: "csv"
      schedule_cron: "0 0 * * *"  # Daily

  # PDF generation settings
  pdf:
    default_page_size: "A4"
    default_margin: 40
    header_height: 60
    footer_height: 40
    font_family: "Helvetica"
    font_size: 10

  # CSV generation settings
  csv:
    delimiter: ","
    encoding: "utf-8"
    include_headers: true
    date_format: "YYYY-MM-DD"
    datetime_format: "YYYY-MM-DD HH:mm:ss"

  # Report retention
  retention:
    max_reports_per_type: 100
    archive_after_days: 90
    delete_after_days: 2555  # 7 years

python_worker:
  enabled: true
  host: "localhost"
  port: 5000
  max_workers: 4
  timeout_seconds: 300

security:
  jwt:
    secret: "change_me_in_production_use_strong_secret"
    expiry: "24h"
  rate_limit:
    enabled: true
    requests_per_minute: 60
    burst_size: 10

logging:
  level: "info"
  format: "json"
  include_caller: true

metrics:
  enabled: true
  endpoint: "/metrics"
  port: 9091
  prefix: "csic_reporting"
