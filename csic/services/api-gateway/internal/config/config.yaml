# CSIC Platform - API Gateway Configuration
# This file contains all configuration settings for the API Gateway service

# Application Settings
app:
  name: "csic-api-gateway"
  version: "1.0.0"
  environment: "development"  # development, staging, production
  build_number: "1"

# Server Settings
server:
  host: "0.0.0.0"
  port: 8080
  read_timeout: 30      # seconds
  write_timeout: 30     # seconds
  max_body_size: 10485760  # bytes (10MB)

# Database Configuration (PostgreSQL)
database:
  host: "postgres"
  port: 5432
  username: "csic_user"
  password: "change_in_production"
  name: "csic_platform"
  ssl_mode: "require"
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: 300  # seconds

# Redis Configuration
redis:
  host: "redis"
  port: 6379
  password: ""
  db: 0
  pool_size: 10
  min_idle_conns: 2

# Kafka Configuration
kafka:
  brokers:
    - "kafka:9092"
  consumer_group: "csic-api-gateway"
  topics:
    transactions: "csic.transactions"
    alerts: "csic.alerts"
    audit_logs: "csic.audit_logs"
    exchange_data: "csic.exchange_data"
    mining_metrics: "csic.mining_metrics"
  security:
    sasl_mechanism: ""
    tls_enabled: false

# Blockchain Configuration
blockchain:
  bitcoin:
    rpc_url: "http://localhost:8332"
    rpc_user: "bitcoin"
    rpc_password: "change_in_production"
    zmq_url: "tcp://localhost:28332"
    wallet_name: ""
  ethereum:
    rpc_url: "http://localhost:8545"
    ws_url: "ws://localhost:8546"
    chain_id: 1
    network_id: 1

# Security Configuration
security:
  jwt:
    secret: "change-this-secret-in-production-environment"
    expiry_hours: 8
    refresh_expiry_hours: 168  # 7 days
    algorithm: "HS256"
  password:
    min_length: 12
    require_uppercase: true
    require_lowercase: true
    require_numbers: true
    require_special: true
    password_history: 12
    max_age_days: 90
  mfa:
    enabled: true
    issuer: "CSIC Platform"
    window: 1
    backup_codes: 10
  session:
    idle_timeout: 30      # minutes
    absolute_timeout: 480  # hours (20 days)
    concurrent_limit: 3
  hsm:
    provider: ""
    library_path: ""
    slot: 0
    key_label: ""
    key_type: ""

# Logging Configuration
logging:
  level: "INFO"   # DEBUG, INFO, WARN, ERROR
  format: "json"  # json, text
  output: "stdout"  # stdout, file
  path: "/var/log/csic/api-gateway"  # file path if output is file

# Monitoring Configuration
monitoring:
  metrics_enabled: true
  tracing_enabled: false
  health_check_interval: 30  # seconds
  metrics_path: "/metrics"
  health_path: "/health"
