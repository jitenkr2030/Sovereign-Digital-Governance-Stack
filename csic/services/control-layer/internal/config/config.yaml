environment: development
service_name: control-layer
log_level: info

# HTTP Server
http_port: 8080

# gRPC Server
grpc_port: 9090

# Database Configuration (PostgreSQL - shared instance + table prefix)
database_url: postgresql://csic:csic_secret@postgres:5432/csic_platform?sslmode=disable
max_open_conn: 25
max_idle_conn: 5
conn_max_lifetime: 300

# Redis Configuration (key prefix isolation)
redis_addr: redis:6379
redis_password: ""
redis_db: 0

# Kafka Configuration
kafka_brokers: kafka:9092
kafka_consumer_group: control-layer-group

# Policy Engine Configuration
policy_cache_ttl: 300
policy_hot_reload: true
evaluation_timeout_ms: 100

# Enforcement Configuration
enforcement_retry_attempts: 3
enforcement_retry_delay_ms: 1000

# Monitoring Configuration
metrics_enabled: true
metrics_port: 9090
health_check_ttl: 30

# Security Configuration
enable_auth: false
jwt_secret: "your-jwt-secret-key-change-in-production"
allowed_origins: "*"

# Kafka Topics
topics:
  policy_updates: control-layer.policy.updates
  enforcement_actions: control-layer.enforcement.actions
  interventions: control-layer.interventions
  telemetry: system.telemetry

# Alert Thresholds
alerts:
  cpu_threshold_percent: 80
  memory_threshold_percent: 85
  disk_threshold_percent: 90
  latency_threshold_ms: 500
  error_rate_threshold_percent: 5
